process.executor = 'local'

// Define the required input parameters
params.organism = "mus_musculus"
params.census_version = "2024-07-01" // version of cellxgene census scvi model and data corpus for reference data
params.cutoff = 0 // do not threshold class probabilities 
params.seed = 42
params.subsample_ref = 50
params.studies_dir = "/space/scratch/gemma-single-cell-data-ensembl-id/mus_musculus"
// params.study_meta_file = "/space/scratch/gemma-single-cell-data-ensembl-id/all_studies.txt"
// params.batch_key = "sample_id" batch keys for scvi integration, must be columns in existing metadata
// as of right now, this is generated automatically from directory names
// would have to be processed individually from experimental design
// params.assay = ["10x 3' v3", "Smart-seq v4"] // assays to use from reference, None defaults to all
// params.tissue = None // tissues to use from reference, None defaults to all
// params.ref_collections = ["Transcriptomic cytoarchitecture reveals principles of human neocortex organization", "SEA-AD: Seattle Alzheimerâ€™s Disease Brain Cell Atlas"]
params.ref_collections = ["A taxonomy of transcriptomic cell types across the isocortex and hippocampal formation"]


params.outdir = "$projectDir/results/${params.organism}_subsample_ref_${params.subsample_ref}"  // Directory where outputs will be saved

process {
  cache = 'standard'  // Options: 'standard' (default), 'deep', 'lenient', or 'false'
}

nextflow {
  clean {
    afterRun = true  // Default is false; set to true to clean up automatically
    NXF_LOG_FILE = "$projectDir/.nextflow/logs/.nextflow.log"
  }
}

profiles {
  conda {
    conda.enabled = true
  }
}

